!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).afm={})}(this,(function(e){"use strict";e.afm=function(e="",t="extension",i=((e="")=>e),n={}){const o=e.includes("\r"),s=o?"\r\n":"\n",r=(e.match(/`{3,3}[^`]+`{3,3}(\r?\n)?/g)||[]).reduce((e,t)=>e.replace(t,""),e).match(/(\s+|\t+)?\>\[\!.*\r?\n((\s+|\t+)?\>[^\[].*\r?\n?){1,}/g)||[],l=Object.keys(n).filter(e=>"VIDEO"===n[e])[0]||"VIDEO",c=new RegExp(`(?<!\`\`\`\\r?\\n(\\s+|\\t+)?)\\>\\[\\!${l}\\]\\((.*)\\)`,"g");let d=e;for(const e of r){const r=e.split(o?/\r\n/:/\n/).filter(e=>e.length>0&&/[^\s]+/.test(e)),l=(r[0].match(/\>\[\!(.*)\]/)||[])[1]||"",c=r[0].replace(/\>\[.*/,""),f=r.slice(1,r.length).map(e=>e.replace(/^(\s+|\t+)?\>/,"")).filter((e,t)=>0!==t||e.length>0).join(s).trim(),a=(l in n?n[l]:l).toLowerCase().replace(/\s/g,"");d=d.replace(r.join(s),`${c}<div class="${t} ${a}"><div>${l}</div><div>${i(f)}</div></div>${s}`)}return d=d.replace(c,`<div class="${t} video"><iframe allowfullscreen embedded-video src="$2" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"><source src="$2" type="" /><p>Your browser does not support the iframe element.</p></iframe></div>`),d},Object.defineProperty(e,"__esModule",{value:!0})}));